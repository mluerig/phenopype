<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Example 2: Stickleback morphometrics - landmarks &#8212; phenopype 2.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Example 3: Fluorescence intensity and shape of phytoplankton cells" href="example_3_phytoplankton.html" />
    <link rel="prev" title="Example 1: Measuring shape, size and colour of isopods" href="example_1_detect_objects_isopods.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          phenopype</a>
        <span class="navbar-text navbar-version pull-left"><b>2.0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/mluerig/phenopype">Phenopype on Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Additional resources</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="tutorial_0.html">How to run tutorials and examples using Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_1_python_intro.html">Tutorial 1: A (very) brief python introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_2_phenopype_images.html">Tutorial 2: Interacting with images in phenopype</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_3_phenopype_workflows.html">Tutorial 3: Image analysis workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_4_managing_projects.html">Tutorial 4: Setting up and managing projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_5_references.html">Tutorial 5: Creating and detecting a reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_6_video_analysis.html">Tutorial 6: Video analysis</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Example 2: Stickleback morphometrics - landmarks</a><ul>
<li><a class="reference internal" href="#Low-throughput">Low throughput</a><ul>
<li><a class="reference internal" href="#Adding-a-reference-scale">Adding a reference scale</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Enter-some-data">Enter some data</a></li>
<li><a class="reference internal" href="#High-throughput">High throughput</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="example_1_detect_objects_isopods.html" title="Previous Chapter: Example 1: Measuring shape, size and colour of isopods"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Example 1: Me...</span>
    </a>
  </li>
  <li>
    <a href="example_3_phytoplankton.html" title="Next Chapter: Example 3: Fluorescence intensity and shape of phytoplankton cells"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Example 3: Fl... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/example_2_landmarks_stickleback.ipynb.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Example 2: Stickleback morphometrics - landmarks</a><ul>
<li><a class="reference internal" href="#Low-throughput">Low throughput</a><ul>
<li><a class="reference internal" href="#Adding-a-reference-scale">Adding a reference scale</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Enter-some-data">Enter some data</a></li>
<li><a class="reference internal" href="#High-throughput">High throughput</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Example-2:-Stickleback-morphometrics---landmarks">
<h1>Example 2: Stickleback morphometrics - landmarks<a class="headerlink" href="#Example-2:-Stickleback-morphometrics---landmarks" title="Permalink to this headline">¶</a></h1>
<p>Functional morphology of organisms is often measured by placing landmarks at specific points that show structural, functional or developmental significance. In this example phenopype is used to place morphometric landmarks across the anterior half of a stickleback (<em>Gasterosteus aculeatus</em>) stained with alizarin red.</p>
<p>First we place landmarks in low throughput mode to learn how the landmark-function works, then we look at a high throughput landkmark example with a project directory and a global scale.</p>
<div class="row; text-align: left"><div class="col-md-6"><p><img alt="4ab39006c1944d14afd148600c20d4cd" src="_images/ex2_before.jpg" /></p>
<p><strong>Input</strong> - Stained threespine stickleback, photographed in a glycerol bath from a camera stand</p>
</div><div class="col-md-6"><p><img alt="b4903e463be44c088b0fe2b2dd8dd3c0" src="_images/ex2_after.jpg" /></p>
<p><strong>Results</strong> - 22 landmarks are placed using the <code class="docutils literal notranslate"><span class="pre">landmark</span></code> tool from the <code class="docutils literal notranslate"><span class="pre">phenopype.measurements</span></code> module</p>
</div></div><div class="section" id="Low-throughput">
<h2>Low throughput<a class="headerlink" href="#Low-throughput" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">phenopype</span> <span class="k">as</span> <span class="nn">pp</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">filepath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;images/stickle1.jpg&quot;</span>
<span class="n">image</span><span class="p">,</span> <span class="n">img_data</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">load_image</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span>
                                <span class="n">df</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pp</span><span class="o">.</span><span class="n">show_image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Start by playing a few test landmarks:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df_landmarks</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">measurement</span><span class="o">.</span><span class="n">landmarks</span><span class="p">(</span><span class="n">image</span><span class="p">,</span>
                                        <span class="n">point_size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
                                        <span class="n">point_colour</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
                                        <span class="n">label_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
- setting landmarks
</pre></div></div>
</div>
<p>The landmark function does not manipulate the image, but instead returns a dataframe with the landmark coordinates. To create an image with the selected points, we first need te select the background image (or “canvas”) with <code class="docutils literal notranslate"><span class="pre">select_canvas</span></code>. This can be the raw image (“raw”), its grayscale version (“gray”), or any of the separate colour channels (“r”, “g”, “b”). We then use the <code class="docutils literal notranslate"><span class="pre">draw_landmarks</span></code> function to draw the landmarks onto the canvas. These explicit steps are necessary when using the
low throughput, but not the high throughput routine (see below).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">canvas</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">select_canvas</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">canvas</span><span class="o">=</span><span class="s2">&quot;raw&quot;</span><span class="p">)</span>

<span class="c1">## draw landmarks on canvas (point colour and size can be redefined here)</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_landmarks</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">df_landmarks</span><span class="o">=</span><span class="n">df_landmarks</span><span class="p">,</span> <span class="n">point_size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
                                <span class="n">point_colour</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
                                <span class="n">label_size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">pp</span><span class="o">.</span><span class="n">show_image</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
- raw image
</pre></div></div>
</div>
<p>We also have to explicitly save the landmarks, and the canvas:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">save_landmarks</span><span class="p">(</span><span class="n">df_landmarks</span><span class="p">,</span> <span class="n">dirpath</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;_temp/output/ex2&quot;</span><span class="p">)</span> <span class="c1">## save landmarks as csv to folder</span>
<span class="n">pp</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">save_canvas</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">dirpath</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;_temp/output/ex2&quot;</span><span class="p">)</span> <span class="c1">## also save canvas for quality control</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
- landmarks saved under _temp/output/ex2\landmarks.csv (overwritten).
- canvas saved under _temp/output/ex2\canvas.jpg (overwritten).
</pre></div></div>
</div>
<div class="section" id="Adding-a-reference-scale">
<h3>Adding a reference scale<a class="headerlink" href="#Adding-a-reference-scale" title="Permalink to this headline">¶</a></h3>
<p>Now we will map a reference card so we can adjust our landmark coordinate space. This is important if for example the distance between the camera and your sample changes.</p>
<center><div style="width:500px; text-align: left"><p><img alt="Adding a scale" src="_images/ex2_scale.gif" /></p>
</div></center><p>After loading the reference image, we measure the distance on the millimeter scale (click on two points inside the image), enter the distance (e.g. 10 mm), and then we create a template by dragging a rectangle around the whole (!) reference card. Finish each step with “enter”.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">phenopype</span> <span class="k">as</span> <span class="nn">pp</span>

<span class="n">ref_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;images/stickleback_side.jpg&quot;</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;images/stickle1.jpg&quot;</span>

<span class="n">ref_image</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">load_image</span><span class="p">(</span><span class="n">ref_path</span><span class="p">)</span>
<span class="n">ref_ratio</span><span class="p">,</span> <span class="n">df_masks</span><span class="p">,</span> <span class="n">template_img</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">preprocessing</span><span class="o">.</span><span class="n">create_reference</span><span class="p">(</span><span class="n">ref_image</span><span class="p">,</span>
                                                                      <span class="n">template</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
- measure pixel-to-mm-ratio
Reference set
- add column length
Template selected
</pre></div></div>
</div>
<p>In the next step, we load the sample image again. The <code class="docutils literal notranslate"><span class="pre">find_scale</span></code> uses a classic machine learning algorithm to find the scale inside our already processed image.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">filepath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;images/stickle1.jpg&quot;</span>
<span class="n">image</span><span class="p">,</span> <span class="n">img_data</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">load_image</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span>
                                <span class="n">df</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">img_data</span><span class="p">,</span> <span class="n">masks</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">preprocessing</span><span class="o">.</span><span class="n">detect_reference</span><span class="p">(</span><span class="n">image</span><span class="p">,</span>
                                                       <span class="n">img_data</span><span class="p">,</span>
                                                       <span class="n">template_image</span><span class="o">=</span><span class="n">template_img</span><span class="p">,</span>
                                                       <span class="n">template_px_mm_ratio</span><span class="o">=</span><span class="n">ref_ratio</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
---------------------------------------------------
Reference card found with 262 keypoint matches:
template image has 37.210885504110216 pixel per mm.
current image has 36.0 pixel per mm.
= 96.814 % of template image.
---------------------------------------------------
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">img_data</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename</th>
      <th>width</th>
      <th>height</th>
      <th>current_px_mm_ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>stickle1.jpg</td>
      <td>2400</td>
      <td>1600</td>
      <td>36.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>This was successful - we see that the reference card found in the image has only ~ 96 % if the size of the card we marked in the template image.</p>
</div>
</div>
<div class="section" id="Enter-some-data">
<h2>Enter some data<a class="headerlink" href="#Enter-some-data" title="Permalink to this headline">¶</a></h2>
<p>For high data quality it is important to verify the ID of the specimen in the current picture. Often, the picture name contains the ID, but typically an label is placed inside the image. Using the <code class="docutils literal notranslate"><span class="pre">enter_data</span></code> tool we open the image and an entry prompt that will create a column with a name of our chosing inside all exported results:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">img_data</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">preprocessing</span><span class="o">.</span><span class="n">enter_data</span><span class="p">(</span><span class="n">image</span><span class="p">,</span>
                                       <span class="n">img_data</span><span class="p">,</span>
                                       <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;ID&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
- add column ID
</pre></div></div>
</div>
<p>Now we place our landmarks again. The resulting csv now contains a column for the pixel-to-mm-ratio from the scale we detected.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df_landmarks</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">measurement</span><span class="o">.</span><span class="n">landmarks</span><span class="p">(</span><span class="n">image</span><span class="p">,</span>
                                        <span class="n">point_size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
                                        <span class="n">point_colour</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
                                        <span class="n">label_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
- setting landmarks
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">canvas</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">select_canvas</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">canvas</span><span class="o">=</span><span class="s2">&quot;raw&quot;</span><span class="p">)</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_landmarks</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">df_landmarks</span><span class="p">,</span> <span class="n">point_size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">point_colour</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">label_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">## detected reference</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_masks</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">df_masks</span><span class="o">=</span><span class="n">masks</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
- raw image
drawing mask: reference
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">show_image</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">save_landmarks</span><span class="p">(</span><span class="n">df_landmarks</span><span class="p">,</span> <span class="n">dirpath</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;_temp/output/ex2&quot;</span><span class="p">)</span>
<span class="n">pp</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">save_canvas</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">dirpath</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;_temp/output/ex2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
- landmarks saved under _temp/output/ex2\landmarks.csv (overwritten).
- canvas saved under _temp/output/ex2\canvas.jpg (overwritten).
</pre></div></div>
</div>
</div>
<div class="section" id="High-throughput">
<h2>High throughput<a class="headerlink" href="#High-throughput" title="Permalink to this headline">¶</a></h2>
<p>ow we will use the high throughput workflow function to place landmarks - first on a single file, and then from within a Phenopype project. For more information on how to analyze multiple images and whole datasets with this approach, check <a class="reference external" href="tutorial_3_phenopype_workflow.ipynb">Tutorials 3</a> and <a class="reference internal" href="tutorial_4_managing_projects.html"><span class="doc">Tutorial 4</span></a>.</p>
<center><div style="text-align: left"><p><img alt="Landmarks in high throughput" src="_images/ex2_ht.gif" /></p>
<p>The <code class="docutils literal notranslate"><span class="pre">pype</span></code> method opens the image and a text editor with the pype configuration file. Any change to the configuration file, in this case the point size for landmarks, will be immediately applied to the image.</p>
</div></center><div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">phenopype</span> <span class="k">as</span> <span class="nn">pp</span>
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">pype_config_templates</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;demo.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\demo.yaml&#39;,
 &#39;ex1.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex1.yaml&#39;,
 &#39;ex2.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex2.yaml&#39;,
 &#39;ex3.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex3.yaml&#39;,
 &#39;ex5_1.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex5_1.yaml&#39;,
 &#39;ex5_2.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex5_2.yaml&#39;,
 &#39;ex6.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex6.yaml&#39;,
 &#39;ex7.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex7.yaml&#39;,
 &#39;ex8_1.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex8_1.yaml&#39;,
 &#39;ex8_2.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex8_2.yaml&#39;,
 &#39;landmarks1.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\landmarks1.yaml&#39;,
 &#39;landmarks2.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\landmarks2.yaml&#39;,
 &#39;tut3.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\tut3.yaml&#39;}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">show_config_template</span><span class="p">(</span><span class="s2">&quot;ex2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SHOWING BUILTIN PHENOPYPE TEMPLATE ex2.yaml


- preprocessing:
  - detect_reference
  - enter_data
- measurement:
  - landmarks:
      point_size: 12
      point_colour: green
      label_size: 2
      label_width: 2
- visualization:
  - draw_masks
  - draw_landmarks:
      point_size: 12
      point_colour: green
      label_size: 2
      label_width: 2
- export:
  - save_landmarks
  - save_masks
  - save_data_entry
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pype</span></code> can be used on single images by supplying a filepath. Run the <code class="docutils literal notranslate"><span class="pre">pype</span></code> function, go to the output dirpath, and check the collected results.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">filepath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;images/stickle1.jpg&quot;</span> <span class="c1"># works</span>

<span class="c1">## dirpath specifies a directory where all results are saved</span>
<span class="n">pp</span><span class="o">.</span><span class="n">pype</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;lm1&quot;</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="s2">&quot;ex2&quot;</span><span class="p">,</span>
        <span class="n">dirpath</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;_temp/output/ex2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Directory to save phenopype-container output set to parent folder of image:
D:\workspace\git\phenopype\tutorials\images
pype_config_lm1.yaml already exists - overwrite?
y: yes, file will be overwritten and loaded
n: no, existing file will be loaded instead
To load an existing file, use &#34;config&#34; instead of &#34;template&#34;.y
New pype configuration created (ex2.yaml) from phenopype template:
d:\workspace\git\phenopype\phenopype\templates\ex2.yaml


------------+++ new pype iteration 2021:05:10 15:37:15 +++--------------


=== AUTOLOAD ===
- columns ID from attributes.yaml
- landmarks_lm1.csv
- masks_lm1.csv
PREPROCESSING
detect_reference
- reference information missing - abort
preprocessing.detect_reference: UnboundLocalError - local variable &#39;detected_px_mm_ratio&#39; referenced before assignment
enter_data
- column ID already created (overwrite=False)
MEASUREMENT
landmarks
- landmarks already set (overwrite=False)
VISUALIZATION
- modifed image
- autoselect canvas
draw_masks
draw_landmarks
EXPORT
save_landmarks
- landmarks saved under _temp/output/ex2\landmarks_lm1.csv (overwritten).
save_masks
- masks saved under _temp/output/ex2\masks_lm1.csv (overwritten).
save_data_entry
- add column ID (overwriting)
=== AUTOSAVE ===
save_canvas
- canvas saved under _temp/output/ex2\canvas_lm1.jpg (overwritten).


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




------------+++ new pype iteration 2021:05:10 15:37:23 +++--------------


Nothing loaded.
PREPROCESSING
detect_reference
- reference information missing - abort
preprocessing.detect_reference: UnboundLocalError - local variable &#39;detected_px_mm_ratio&#39; referenced before assignment
enter_data
- column ID already created (overwrite=False)
MEASUREMENT
landmarks
- landmarks already set (overwrite=False)
VISUALIZATION
- modifed image
- autoselect canvas
draw_masks
draw_landmarks
EXPORT
save_landmarks
- landmarks saved under _temp/output/ex2\landmarks_lm1.csv (overwritten).
save_masks
- masks saved under _temp/output/ex2\masks_lm1.csv (overwritten).
save_data_entry
- add column ID (overwriting)
=== AUTOSAVE ===
save_canvas
- canvas saved under _temp/output/ex2\canvas_lm1.jpg (overwritten).


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




TERMINATE
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;phenopype.main.pype at 0x25dca7e7e48&gt;
</pre></div></div>
</div>
<p>We will now use the <code class="docutils literal notranslate"><span class="pre">pype</span></code> function together with files organized within a phenopype project. We start with providing some paths, and including select images into the project (i.e. all stickleback images).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">## relative from now (phenopype-master/tutorials)</span>
<span class="n">project_root</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;_temp/output/ex2_project&quot;</span>

<span class="c1">## relative from project root directory (phenopype-master/_temp/project)</span>
<span class="n">image_dir</span> <span class="o">=</span> <span class="s2">&quot;images&quot;</span>
<span class="n">reference_image</span> <span class="o">=</span> <span class="s2">&quot;images/stickleback_side.jpg&quot;</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">myproj</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">root_dir</span><span class="o">=</span><span class="n">project_root</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--------------------------------------------
Phenopype will create a new project at
D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project

Proceed? (y/n)
y
Warning - project root_dir already exists - overwrite? (y/n)y

&#34;D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project&#34; created (overwritten)

project attributes written to D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\attributes.yaml
--------------------------------------------
</pre></div></div>
</div>
<p>First we add the image files in the directory, but only “stickle1”, “stickle2”, and “stickle3”. Then we add the appropriate configuration file. As for the other examples I have created a template (“ex2”) with appropriate settings, which is passed to the pype using <code class="docutils literal notranslate"><span class="pre">template=&quot;ex2&quot;</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">myproj</span><span class="o">.</span><span class="n">add_files</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="n">image_dir</span><span class="p">,</span>
                 <span class="n">include</span><span class="o">=</span><span class="s2">&quot;stickle&quot;</span><span class="p">,</span>
                 <span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">,</span><span class="s2">&quot;top&quot;</span><span class="p">])</span>
<span class="n">myproj</span><span class="o">.</span><span class="n">add_config</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;lm2&quot;</span><span class="p">,</span>
                  <span class="n">template</span><span class="o">=</span><span class="s2">&quot;ex2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--------------------------------------------
phenopype will search for image files at

D:\workspace\git\phenopype\tutorials\images

using the following settings:

filetypes: [&#39;jpg&#39;, &#39;JPG&#39;, &#39;jpeg&#39;, &#39;JPEG&#39;, &#39;tif&#39;, &#39;png&#39;, &#39;bmp&#39;], include: stickle, exclude: [&#39;side&#39;, &#39;top&#39;], mode: copy, recursive: False, resize: False, unique: path

Found image stickle1.JPG - phenopype-project folder 0__stickle1 created
Found image stickle2.JPG - phenopype-project folder 0__stickle2 created
Found image stickle3.JPG - phenopype-project folder 0__stickle3 created

Found 3 files
--------------------------------------------
New pype configuration created (ex2.yaml) from phenopype template:
d:\workspace\git\phenopype\phenopype\templates\ex2.yaml
pype_lm2.yaml created for 0__stickle1
pype_lm2.yaml created for 0__stickle2
pype_lm2.yaml created for 0__stickle3
</pre></div></div>
</div>
<p>Now we again set scale, but this time we pass on the information to all images included in the project. Afterwards, we save the project (to the root folder).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">myproj</span><span class="o">.</span><span class="n">add_reference</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;lm2&quot;</span><span class="p">,</span>
                     <span class="n">reference_image</span><span class="o">=</span><span class="n">reference_image</span><span class="p">,</span>
                     <span class="n">template</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                     <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Reference image loaded from images/stickleback_side.jpg
- measure pixel-to-mm-ratio
Reference set
- add column length
Template selected
Reference image saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\reference_lm2.tif
Reference image saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\reference_template_lm2.tif
Saved reference info to project attributes.
setting active reference to &#34;lm2&#34; for 0__stickle1 (active=True)
setting active reference to &#34;lm2&#34; for 0__stickle2 (active=True)
setting active reference to &#34;lm2&#34; for 0__stickle3 (active=True)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">myproj</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Project data saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\project.data.
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">## if you have already run above cell you can load your project using &quot;project.load&quot;:</span>
<span class="c1"># myproj = pp.project.load(r&quot;_temp/project/project.data&quot;) ## run this if you</span>
</pre></div>
</div>
</div>
<p>After creating the project files, we can run the <code class="docutils literal notranslate"><span class="pre">pype</span></code> routine with a simple loop on <code class="docutils literal notranslate"><span class="pre">myproj.dirpaths</span></code>, which is a list of all project directories that contain the copied raw images and the config files we generated before.</p>
<p>Move on to the next image with <code class="docutils literal notranslate"><span class="pre">Ctrl+Enter</span></code>, interrupt the loop with <code class="docutils literal notranslate"><span class="pre">Esc</span></code>. To resume to the point where you left, add the <code class="docutils literal notranslate"><span class="pre">skip</span></code> argument so directory with processed files are not run again.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">dirpath</span> <span class="ow">in</span> <span class="n">myproj</span><span class="o">.</span><span class="n">dirpaths</span><span class="p">:</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">pype</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;lm2&quot;</span><span class="p">,</span> <span class="n">skip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Succesfully loaded existing pype config (pype_config_lm2.yaml) from:
D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle1\pype_config_lm2.yaml


------------+++ new pype iteration 2021:05:10 15:38:13 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for lm2
- reference template image loaded from root directory
PREPROCESSING
detect_reference
---------------------------------------------------
Reference card found with 251 keypoint matches:
template image has 36.90121949204389 pixel per mm.
current image has 35.7 pixel per mm.
= 96.802 % of template image.
---------------------------------------------------
enter_data
- add column ID
MEASUREMENT
landmarks
- setting landmarks
VISUALIZATION
- modifed image
- autoselect canvas
draw_masks
drawing mask: reference
draw_landmarks
EXPORT
save_landmarks
- landmarks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle1\landmarks_lm2.csv.
save_masks
- masks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle1\masks_lm2.csv.
save_data_entry
- add column ID
=== AUTOSAVE ===
save_canvas
- canvas saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle1\canvas_lm2.jpg.
save_reference
lm2
- save reference to attributes


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




------------+++ new pype iteration 2021:05:10 15:38:23 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for lm2
- reference template image loaded from root directory
PREPROCESSING
detect_reference
- reference already detected (overwrite=False)
enter_data
- column ID already created (overwrite=False)
MEASUREMENT
landmarks
- landmarks already set (overwrite=False)
VISUALIZATION
- modifed image
- autoselect canvas
draw_masks
drawing mask: reference
draw_landmarks
EXPORT
save_landmarks
- landmarks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle1\landmarks_lm2.csv (overwritten).
save_masks
- masks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle1\masks_lm2.csv (overwritten).
save_data_entry
- add column ID (overwriting)
=== AUTOSAVE ===
save_canvas
- canvas saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle1\canvas_lm2.jpg (overwritten).
save_reference
lm2
- save reference to attributes (overwriting)


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




TERMINATE
Succesfully loaded existing pype config (pype_config_lm2.yaml) from:
D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle2\pype_config_lm2.yaml


------------+++ new pype iteration 2021:05:10 15:38:27 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for lm2
- reference template image loaded from root directory
PREPROCESSING
detect_reference
---------------------------------------------------
Reference card found with 222 keypoint matches:
template image has 36.90121949204389 pixel per mm.
current image has 35.7 pixel per mm.
= 96.631 % of template image.
---------------------------------------------------
enter_data
- add column ID
MEASUREMENT
landmarks
- setting landmarks
VISUALIZATION
- modifed image
- autoselect canvas
draw_masks
drawing mask: reference
draw_landmarks
EXPORT
save_landmarks
- landmarks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle2\landmarks_lm2.csv.
save_masks
- masks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle2\masks_lm2.csv.
save_data_entry
- add column ID
=== AUTOSAVE ===
save_canvas
- canvas saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle2\canvas_lm2.jpg.
save_reference
lm2
- save reference to attributes


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




------------+++ new pype iteration 2021:05:10 15:38:36 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for lm2
- reference template image loaded from root directory
PREPROCESSING
detect_reference
- reference already detected (overwrite=False)
enter_data
- column ID already created (overwrite=False)
MEASUREMENT
landmarks
- landmarks already set (overwrite=False)
VISUALIZATION
- modifed image
- autoselect canvas
draw_masks
drawing mask: reference
draw_landmarks
EXPORT
save_landmarks
- landmarks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle2\landmarks_lm2.csv (overwritten).
save_masks
- masks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle2\masks_lm2.csv (overwritten).
save_data_entry
- add column ID (overwriting)
=== AUTOSAVE ===
save_canvas
- canvas saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle2\canvas_lm2.jpg (overwritten).
save_reference
lm2
- save reference to attributes (overwriting)


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




TERMINATE
Succesfully loaded existing pype config (pype_config_lm2.yaml) from:
D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle3\pype_config_lm2.yaml


------------+++ new pype iteration 2021:05:10 15:38:38 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for lm2
- reference template image loaded from root directory
PREPROCESSING
detect_reference
---------------------------------------------------
Reference card found with 260 keypoint matches:
template image has 36.90121949204389 pixel per mm.
current image has 35.7 pixel per mm.
= 96.765 % of template image.
---------------------------------------------------
enter_data
- add column ID
MEASUREMENT
landmarks
- setting landmarks
VISUALIZATION
- modifed image
- autoselect canvas
draw_masks
drawing mask: reference
draw_landmarks
EXPORT
save_landmarks
- landmarks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle3\landmarks_lm2.csv.
save_masks
- masks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle3\masks_lm2.csv.
save_data_entry
- add column ID
=== AUTOSAVE ===
save_canvas
- canvas saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex2_project\data\0__stickle3\canvas_lm2.jpg.
save_reference
lm2
- save reference to attributes


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




TERMINATE
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2021, Moritz Lürig.<br/>
      Last updated on May 10, 2021, 5:17:54 PM.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>