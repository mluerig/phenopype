<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Tutorial 2: Working with phenopype (prototyping, low throughput, high throughput) &#8212; phenopype 1.0.3 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial 3: Setting up and managing phenopype projects" href="tutorial_3_managing_projects_1.html" />
    <link rel="prev" title="Tutorial 1: A (very) brief python introduction" href="tutorial_1_python_intro.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          phenopype</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.3</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/mluerig/phenopype">Phenopype on Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Additional resources</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="tutorial_0.html">How to run the tutorials and examples using Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_1_python_intro.html">Tutorial 1: A (very) brief python introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial 2: Working with phenopype (prototyping, low throughput, high throughput)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_3_managing_projects_1.html">Tutorial 3: Setting up and managing phenopype projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_4_managing_projects_2.html">Tutorial 4: Project wide actions (e.g. size and colour reference)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_5_gui_interactions.html">Tutorial 5: GUI interactions (masks, lines and drawing tools)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_6_video_analysis.html">Tutorial 6: Video analysis</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Tutorial 2: Working with phenopype (prototyping, low throughput, high throughput)</a><ul>
<li><a class="reference internal" href="#Prototyping-worflow">Prototyping worflow</a></li>
<li><a class="reference internal" href="#Low-throughput-worflow">Low throughput worflow</a></li>
<li><a class="reference internal" href="#High-throughput-worflow">High throughput worflow</a><ul>
<li><a class="reference internal" href="#yaml-syntax">yaml-syntax</a></li>
<li><a class="reference internal" href="#pype-behavior">pype behavior</a><ul>
<li><a class="reference internal" href="#Window-control">Window control</a></li>
<li><a class="reference internal" href="#Function-execution">Function execution</a></li>
<li><a class="reference internal" href="#Visualizing-the-results">Visualizing the results</a></li>
<li><a class="reference internal" href="#Exporting-the-results">Exporting the results</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="tutorial_1_python_intro.html" title="Previous Chapter: Tutorial 1: A (very) brief python introduction"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Tutorial 1: A...</span>
    </a>
  </li>
  <li>
    <a href="tutorial_3_managing_projects_1.html" title="Next Chapter: Tutorial 3: Setting up and managing phenopype projects"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Tutorial 3: S... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/tutorial_2_phenopype_workflow.ipynb.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Tutorial 2: Working with phenopype (prototyping, low throughput, high throughput)</a><ul>
<li><a class="reference internal" href="#Prototyping-worflow">Prototyping worflow</a></li>
<li><a class="reference internal" href="#Low-throughput-worflow">Low throughput worflow</a></li>
<li><a class="reference internal" href="#High-throughput-worflow">High throughput worflow</a><ul>
<li><a class="reference internal" href="#yaml-syntax">yaml-syntax</a></li>
<li><a class="reference internal" href="#pype-behavior">pype behavior</a><ul>
<li><a class="reference internal" href="#Window-control">Window control</a></li>
<li><a class="reference internal" href="#Function-execution">Function execution</a></li>
<li><a class="reference internal" href="#Visualizing-the-results">Visualizing the results</a></li>
<li><a class="reference internal" href="#Exporting-the-results">Exporting the results</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5.5ex;
    padding-top: 0.3rem;
    padding-right: 0.3rem;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 0.3rem;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Tutorial-2:-Working-with-phenopype-(prototyping,-low-throughput,-high-throughput)">
<h1>Tutorial 2: Working with phenopype (prototyping, low throughput, high throughput)<a class="headerlink" href="#Tutorial-2:-Working-with-phenopype-(prototyping,-low-throughput,-high-throughput)" title="Permalink to this headline">¶</a></h1>
<p>Analysis of scientific images can be an iterative process that may require frequent user input to preprocess images, adjust settings and evaluate the obtained results. In phenopype, users can start this process by identifying the appropriate functions and settings to analyse a series of images (i.e. which segmentation algorithms is to be used). For the actual analysis, users then can switch to a workflow that has higher throughput and is more reproducible. Phenopype offers workflows that are
appropriate for all stages of the scientific process:</p>
<hr class="docutils" />
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 29%" />
<col style="width: 37%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Workflow</p></th>
<th class="head"><p>Use case</p></th>
<th class="head"><p>Principle of operation</p></th>
<th class="head"><p>Explicitness</p></th>
<th class="head"><p>Reproducibility</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="#Prototyping-worflow">Prototyping</a></p></td>
<td><p>analysis prototyping, self education and evaluation</p></td>
<td><p>images are loaded as arrays and functions are applied one by one</p></td>
<td><p>High</p></td>
<td><p>Low</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="#Low-throughput-worflow">Low throughput</a></p></td>
<td><p>single pictures and very small datasets</p></td>
<td><p>images are loaded into phenopype containers</p></td>
<td><p>Medium</p></td>
<td><p>low</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="#High-throughput-worflow">High throughput</a></p></td>
<td><p>medium and large datasets - default analysis workflow</p></td>
<td><p>images are loaded from a phenopype project directory tree, and analyzed with the <a class="reference external" href="api.html#pype-method">pype</a> method</p></td>
<td><p>Low</p></td>
<td><p>High</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>For all three workflows, users assemble a stack of computer vision functions from phenopypes five core modules (preprocessing, segmentation, measurement, export, visualization - for an overview check the <a class="reference external" href="api.html">API reference</a>). However, the degree of user interaction, visual feedback and the mode by which these functions are applied to images differ, as well as reproducibility.</p>
<p>In the prototyping and low throughput workflow, users write a phenopype function stack in directly in Python code. This is recommended for users who wish to familiarize themselves with the basic principles of computer vision and to explore the phenopype function library. Output from all intermediate steps is returned from the functions and can be evaluated, which makes these routines are also appropriate for prototyping and testing.</p>
<p>To process image datasets in high throughput and reproducibility, users should work from a phenopype directory structure in conjunction with the pype-method. To get started with Phenopype’s high througput workflow, <a class="reference external" href="#High-throughput-worflow">see below</a>, check <a class="reference internal" href="tutorial_3_managing_projects_1.html"><span class="doc">Tutorial 3</span></a> and consult the <a class="reference external" href="api.html#pype-method">pype section in the API reference</a>.</p>
<center><div style="width:600px; text-align: left"><p><img alt="Phenopype workflow example" src="_images/workflow_example_case.png" /></p>
<p><strong>Fig. 1:</strong> Workflow demonstration using a stained stickleback (<em>Gasterosteus aculeatus</em>) stained with alizarin red. Traits of interest are bone-plate area and shape, and, within the detected plates, pixel intensities that denote bone-density. The computer vision functions used to extract the trait of interest (bone-plate area, shape and pixel density) are the same in all workflows, but workflows differ in the amount of code necessary and in reproducibility.</p>
</div></center><div class="section" id="Prototyping-worflow">
<h2>Prototyping worflow<a class="headerlink" href="#Prototyping-worflow" title="Permalink to this headline">¶</a></h2>
<p>The low throughput workflow starts with the path to an image that is stored on the hard drive. <code class="docutils literal notranslate"><span class="pre">load_image</span></code> imports the file as a three-channel [1] numpy array (<em>ndarray</em>), together with image meta data (file name, exposure, dimensions, etc.) as a pandas <em>DataFrame</em>. The array gets passed on to the <code class="docutils literal notranslate"><span class="pre">threshold</span></code> function, which will return a binary array of the same dimensions. This array needs to be passed on to the <code class="docutils literal notranslate"><span class="pre">find_contours</span></code> function, which will return a dictionary with the detected
contours. This dictionary, together with the original array, can then be passed to the <code class="docutils literal notranslate"><span class="pre">colour_intensity</span></code> function. This function will collect the average color value from within the perimeter coordinates for each contour and return a pandas dataframe containing those values. Finally, the dataframe can be exported as a csv file with <code class="docutils literal notranslate"><span class="pre">save_colour</span></code>. By passing on the initially created meta-data, the function will automatically expand the provided columns of meta-info into the exported csv.</p>
<p>[1] to learn more about the basics of Computer Vision check the <a class="reference external" href="resources.html">resources section</a> of the phenopype documentation.</p>
<p><img alt="Phenopype prototyping workflow" src="_images/workflow_proto.png" /> Fig. 2: Schematic of Phenopype’s prototyping workflow</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">phenopype</span> <span class="k">as</span> <span class="nn">pp</span>

<span class="n">filepath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;images/stickleback_side.jpg&quot;</span>

<span class="c1">## load image as array, supply image_data (DataFrame containing meta data)</span>
<span class="n">image</span><span class="p">,</span> <span class="n">image_data</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">load_image</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">df</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">## draw mask</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">preprocessing</span><span class="o">.</span><span class="n">create_mask</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="s2">&quot;polygon&quot;</span><span class="p">)</span>

<span class="c1">## thresholding converts multichannel to binary image</span>
<span class="n">image_bin</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">segmentation</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;adaptive&quot;</span><span class="p">,</span>
                                      <span class="n">channel</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">blocksize</span><span class="o">=</span><span class="mi">199</span><span class="p">,</span>
                                      <span class="n">constant</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">df_masks</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
<span class="c1">## perform morphology operations on binarized image</span>
<span class="n">image_morph</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">segmentation</span><span class="o">.</span><span class="n">morphology</span><span class="p">(</span><span class="n">image_bin</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;close&quot;</span><span class="p">,</span>
                                         <span class="n">shape</span><span class="o">=</span><span class="s2">&quot;ellipse&quot;</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                         <span class="n">iterations</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1">## detect contours ony binary image</span>
<span class="n">contours</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">segmentation</span><span class="o">.</span><span class="n">find_contours</span><span class="p">(</span><span class="n">image_morph</span><span class="p">,</span> <span class="n">df_image_data</span><span class="o">=</span><span class="n">image_data</span><span class="p">,</span>
                                         <span class="n">retrieval</span><span class="o">=</span><span class="s2">&quot;ext&quot;</span><span class="p">,</span> <span class="n">min_area</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
<span class="c1">## draw detected contours onto canvas</span>
<span class="n">image_drawn</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_contours</span><span class="p">(</span><span class="n">image</span><span class="p">,</span>
                                             <span class="n">df_contours</span><span class="o">=</span><span class="n">contours</span><span class="p">)</span>
<span class="c1">## export contours to csv</span>
<span class="n">pp</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">save_contours</span><span class="p">(</span><span class="n">contours</span><span class="p">,</span> <span class="n">dirpath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;../_temp/output&quot;</span><span class="p">)</span>
<span class="c1">## show convas</span>
<span class="n">pp</span><span class="o">.</span><span class="n">show_image</span><span class="p">(</span><span class="n">image_drawn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
no meta-data found
- create mask
- include mask &#34;mask1&#34; pixels
- contours saved under ../_temp/output\contours.csv (overwritten).
</pre></div></div>
</div>
<p>While analyzing the image, you can explore output from the different steps to see what is going on. For example, the binary image resulting from the thresholding:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">show_image</span><span class="p">(</span><span class="n">image_bin</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Low-throughput-worflow">
<h2>Low throughput worflow<a class="headerlink" href="#Low-throughput-worflow" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">load_image</span></code> function can also load an image into a phenopype container, which is a python class that incorporates loaded images, dataframes, detected contours, intermediate output, etc. so that they are available for inspection or storage at the end of the analysis. The advantage of using containers is that they don’t litter the global environment and namespace, while still containing all intermediate steps (e.g. binary masks or contour DataFrames). Containers can be used manually to
analyze images, but typically they are used automatically within the pype-routine that is part of phenoype’s high throughput workflow (see below).</p>
<p><img alt="Phenopype low throughput workflow" src="_images/workflow_low.png" /></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">phenopype</span> <span class="k">as</span> <span class="nn">pp</span>

<span class="n">filepath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;images/stickleback_side.jpg&quot;</span>

<span class="c1">## load image as a phenopype container which will include all images, dataframes,</span>
<span class="c1">## detected contours and intermediate output</span>
<span class="n">container</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">load_image</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">cont</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1">## afterwards, same as in the prototyping workflow, functions are applied</span>
<span class="c1">## directly to the container</span>
<span class="n">pp</span><span class="o">.</span><span class="n">preprocessing</span><span class="o">.</span><span class="n">create_mask</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="s2">&quot;polygon&quot;</span><span class="p">)</span>
<span class="n">pp</span><span class="o">.</span><span class="n">segmentation</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;adaptive&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
                          <span class="n">blocksize</span><span class="o">=</span><span class="mi">199</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># 3/4</span>
<span class="n">pp</span><span class="o">.</span><span class="n">segmentation</span><span class="o">.</span><span class="n">morphology</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;close&quot;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="s2">&quot;ellipse&quot;</span><span class="p">,</span>
                           <span class="n">kernel_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># 5</span>
<span class="n">pp</span><span class="o">.</span><span class="n">segmentation</span><span class="o">.</span><span class="n">find_contours</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">retrieval</span><span class="o">=</span><span class="s2">&quot;ext&quot;</span><span class="p">,</span> <span class="n">min_area</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span> <span class="c1"># 6</span>
<span class="n">pp</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_contours</span><span class="p">(</span><span class="n">container</span><span class="p">)</span> <span class="c1"># 6</span>
<span class="n">pp</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">save_contours</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">dirpath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;../_temp/output&quot;</span><span class="p">)</span>
<span class="n">pp</span><span class="o">.</span><span class="n">show_image</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
no meta-data found
- create mask
- include mask &#34;mask1&#34; pixels
- contours saved under ../_temp/output\contours.csv (overwritten).
</pre></div></div>
</div>
<p>Although the intermediate steps from the functions are not present as objects in the namespace, you can access and evaluate it from the container. Again, we will look at the binary image:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">show_image</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">image_bin</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">dir</span></code> to inspect all the components of the container:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">container</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;__class__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__le__&#39;, &#39;__lt__&#39;, &#39;__module__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;canvas&#39;, &#39;df_contours&#39;, &#39;df_image_data&#39;, &#39;df_image_data_copy&#39;, &#39;df_masks&#39;, &#39;dirpath&#39;, &#39;image&#39;, &#39;image_bin&#39;, &#39;image_copy&#39;, &#39;image_data&#39;, &#39;image_gray&#39;, &#39;image_mod&#39;, &#39;load&#39;, &#39;reset&#39;, &#39;save&#39;, &#39;save_suffix&#39;]
</pre></div></div>
</div>
</div>
<div class="section" id="High-throughput-worflow">
<h2>High throughput worflow<a class="headerlink" href="#High-throughput-worflow" title="Permalink to this headline">¶</a></h2>
<p>The pype routine is phenopype’s standard method to analyse medium and large image datasets, where a function stack is constructed with the human readable <code class="docutils literal notranslate"><span class="pre">yaml</span></code> syntax (<a class="reference external" href="#yaml-syntax">see below</a>). Users can execute the pype method on a filepath, an array, or a phenopype directory, which always will trigger three actions:</p>
<ol class="arabic simple">
<li><p>open the contained yaml configuration with the default OS text editor</p></li>
<li><p>parse the contained functions and execute them in the sequence</p></li>
<li><p>open a Python-window showing the processed image.</p></li>
</ol>
<p>After one iteration of these steps, users can evaluate the results and decide to modify the opened configuration file (e.g. either change function parameters or add new functions), and run the pype again, or to terminate the pype and save all results. The processed image, any extracted phenotypic information, as well as the modified config-file is stored inside the image directory. Together with the raw images, which may be either stored separately or within the directory tree, users can thereby
provide the full image analysis pipeline to anyone who wishes to reproduce the obtained results.</p>
<p><strong>Further information</strong></p>
<ul class="simple">
<li><p>For more detailed information on the <code class="docutils literal notranslate"><span class="pre">pype</span></code> method, configuration files, and default behavior, see <a class="reference external" href="#yaml-syntax">below</a>, and the <a class="reference external" href="api.html#pype-method">pype section of the API reference</a></p></li>
<li><p>For more information on how to use the <code class="docutils literal notranslate"><span class="pre">pype</span></code> in conjunction with phenopype projects please refer to the <a class="reference internal" href="tutorial_3_managing_projects_1.html"><span class="doc">Tutorial 3</span></a>.</p></li>
<li><p>Also, check the examples (e.g. <a class="reference internal" href="example_2_landmarks_stickleback.html"><span class="doc">Example 2</span></a>), which include code for both low and high throughput.</p></li>
</ul>
<p><img alt="Phenopype high throughput workflow" src="_images/workflow_high.png" /></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">phenopype</span> <span class="k">as</span> <span class="nn">pp</span>

<span class="n">filepath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;images/stickleback_side.jpg&quot;</span>

<span class="n">pp</span><span class="o">.</span><span class="n">pype</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">filepath</span><span class="p">,</span> <span class="c1"># input - can be also an array or a phenopype directory</span>
        <span class="n">dirpath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;../_temp/output&quot;</span><span class="p">,</span> <span class="c1">## where output is stored - folder needs to exist</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;demo&quot;</span><span class="p">,</span> <span class="c1"># name of the  pype routine, appended to all results-files</span>
        <span class="n">config_preset</span><span class="o">=</span><span class="s2">&quot;demo1&quot;</span> <span class="c1"># template for the analysis - you can create your own!</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
../_temp/output\pype_config_demo.yaml


------------+++ new pype iteration 2020:04:20 16:14:24 +++--------------


AUTOLOAD
- drawing loaded from attributes.yaml
- masks_demo.csv
PREPROCESSING
create_mask
- mask with label mask1 already created (overwrite=False)
SEGMENTATION
threshold
- include mask &#34;mask1&#34; pixels
morphology
find_contours
VISUALIZATION
select_canvas
- invalid selection - defaulting to raw image
draw_contours
draw_masks
 - show mask: mask1.
EXPORT
save_contours
- contours saved under ../_temp/output\contours_demo.csv (overwritten).
save_canvas
- canvas saved under ../_temp/output\canvas_demo.jpg (overwritten).
AUTOSAVE
save_masks
- masks not saved - file already exists (overwrite=False).
save_drawing
- drawing saved (overwriting)


TERMINATE
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;phenopype.main.pype at 0x2c52e39a8c8&gt;
</pre></div></div>
</div>
<p>At the current stage of development, the pype method is prone to errors resulting from incorrect yaml syntax, e.g. missing spaces or wrong indentation. The pype will still try to run from bottom to top and pass exceptions, but may result in errors that cascade through the function stack. Consult the section <a class="reference external" href="#yaml-syntax">below</a> on how to modify yaml-syntax.</p>
<p>Moreover, the pype will trigger specific behavior of some functions to facilitate user experience when working with large data sets. Fore example, some functions get called automatically (e.g. from the <code class="docutils literal notranslate"><span class="pre">visualization</span></code> and <code class="docutils literal notranslate"><span class="pre">export</span></code> modules), but they don’t necessarily show default behavior as documented in the api (e.g. <code class="docutils literal notranslate"><span class="pre">visualization.save_canvas</span></code> will always have <code class="docutils literal notranslate"><span class="pre">overwrite=True</span></code> to save output canvas). Consult the section <a class="reference external" href="#pype-behavior">below</a> to learn about pype-behavior.</p>
<div class="section" id="yaml-syntax">
<h3>yaml-syntax<a class="headerlink" href="#yaml-syntax" title="Permalink to this headline">¶</a></h3>
<p>The configuration files needed to run the pype are written in yaml (a recursive acronym for “YAML Ain’t Markup Language”). In principle, these are just text files that follow a specific syntax that follows rules for <a class="reference external" href="https://www.tutorialspoint.com/yaml/yaml_indentation_and_separation.htm">indentation and separation</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">phenopype</span> <span class="k">as</span> <span class="nn">pp</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">demo1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

preprocessing:
- create_mask:
    tool: polygon
segmentation:
- threshold:
    method: adaptive
    blocksize: 199
    constant: 5
    channel: red
- morphology:
    operation: close
    shape: ellipse
    kernel_size: 3
    iterations: 3
- find_contours:
    retrieval: ext
    min_diameter: 0
    min_area: 150
measurement:
visualization:
- select_canvas:
    canvas: image
- draw_contours:
    line_width: 2
    label_width: 1
    label_size: 1
    fill: 0.3
- draw_masks
export:
- save_contours:
    overwrite: true
- save_canvas:
    resize: 0.5
    overwrite: true

</pre></div></div>
</div>
<p>The text inside the yaml configuration files is parsed by Python from top to bottom, i.e. converted to modules and functions in Phenopype. The first level without any indentation, e.g. from the above example <code class="docutils literal notranslate"><span class="pre">segmentation</span></code>, <code class="docutils literal notranslate"><span class="pre">visualization</span></code> and <code class="docutils literal notranslate"><span class="pre">export</span></code>, denote from the core module that a function is part of. The second level, e.g. <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">threshold</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">find_contours</span></code> are functions inside the <code class="docutils literal notranslate"><span class="pre">segmentation</span></code> module. The third level, e.g. <code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">otsu</span></code> and <code class="docutils literal notranslate"><span class="pre">blocksize:</span> <span class="pre">99</span></code>, are
arguments passed on to the function. Following this notation, the yaml parser in Python would interpret the first item in <code class="docutils literal notranslate"><span class="pre">segmentation</span></code> as follows:</p>
<p>pp.segmentation.threshold(image, method=“otsu”, blocksize=99, constant=1, value=127, channel=“gray”)</p>
<p>When running the pype routine, <code class="docutils literal notranslate"><span class="pre">image</span></code> is automatically loaded and passed to all functions. Apart from that you can add or remove functions as you like. Note the hyphen followed by a space in front (<code class="docutils literal notranslate"><span class="pre">-</span></code>) a function: this notation indicates that during parsing the items are interpreted as part of a list. This important, as it allows you to specify the same function as many times as you want.</p>
<p>When adding or modifying modules and functions, it is important to keep in mind that the <strong>function stack is executed sequentially</strong>. So, if you want to perform a <code class="docutils literal notranslate"><span class="pre">morphology</span></code> operation on a binary images, it should come <em>after</em> and not before the main segmentation function (in this case <code class="docutils literal notranslate"><span class="pre">threshold</span></code>). Also, the order for modules should always be:</p>
<p><strong>preprocessing &gt; segmentation &gt; measurement &gt; visualization &gt; export</strong></p>
<p>Here are the most important syntax rules summed up:</p>
<ul class="simple">
<li><p><strong>indentation rules:</strong> 0 spaces for modules, hyphen+space in front of functions, 4 spaces in front of arguments</p></li>
<li><p><strong>separation rules:</strong> modules and functions with arguments are followed by a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>) and a new line; functions without specified arguments don’t need a colon; arguments are followed by a colon, a space and then the value</p></li>
<li><p>modules and functions can be emtpy (e.g. see <code class="docutils literal notranslate"><span class="pre">measurement:</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">draw_masks</span></code> above), but function arguments <em>cannot</em> (e.g. <code class="docutils literal notranslate"><span class="pre">overwrite:</span></code> needs to be <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></li>
<li><p>as per Python syntax, optional function arguments can, but don’t have to be specified and the functions will just run on default values</p></li>
<li><p>if you need to add modules (not all presets contain all modules), stick to this order: preprocessing &gt; segmentation &gt; measurement &gt; visualization &gt; export</p></li>
<li><p>functions can be added multiple times, but sometimes their output may be overwtritten (e.g. <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">threshold</span></code> only works once, <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">create_mask</span></code> multiple times [1])</p></li>
</ul>
<p>[1] Note that one <code class="docutils literal notranslate"><span class="pre">create_mask</span></code> mask operation already can create multiple masks - see <a class="reference internal" href="tutorial_5_gui_interactions.html"><span class="doc">Tutorial 5</span></a>.</p>
</div>
<div class="section" id="pype-behavior">
<h3>pype behavior<a class="headerlink" href="#pype-behavior" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pype</span></code> function has specific implicit [1] behavior that aims at supporting speed and robustness when working in “production” (i.e. when performing the actual analysis of large image datasets compared to prototyping and low throughput workflow). Here I list some important aspects of that behavior.</p>
<div class="section" id="Window-control">
<h4>Window control<a class="headerlink" href="#Window-control" title="Permalink to this headline">¶</a></h4>
<p>Handling the popped up image and text windows (if your text window didn’t pop up, check the <a class="reference external" href="installation.html#choose-a-text-editor">installation instructions</a>).</p>
<ol class="arabic simple">
<li><p>Editing and saving the opened configuration file will close the image window, run the functions in the control file, and show the updated results.</p></li>
<li><p>Closing the image window manually (with the X button in the upper right), also runs the functions in the control file, and show the updated results.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Esc</span></code> will close all windows and interrupt the pype routine (<code class="docutils literal notranslate"><span class="pre">Esc</span></code> triggers <code class="docutils literal notranslate"><span class="pre">sys.exit()</span></code>, which will also end a Python session if run from the command line) [2,3].</p></li>
<li><p>Each step that requires user interaction (e.g. <code class="docutils literal notranslate"><span class="pre">create_mask</span></code> or <code class="docutils literal notranslate"><span class="pre">landmarks</span></code>) needs to be confirmed with <code class="docutils literal notranslate"><span class="pre">Return</span></code> until the next function in the sequence is executed [2,3].</p></li>
<li><p>At the end of the analysis, when the final steps (visualization and export functions) have run, you can end the pype routine with another <code class="docutils literal notranslate"><span class="pre">Return</span></code> keystroke [2,3].</p></li>
</ol>
<p>[1] At this point, it’s not configurable, but later versions will allow to customize the behavior.</p>
<p>[2] Sometimes keystrokes will not be recognized, so they need to be executed multiple times - see <a class="reference internal" href="tutorial_5_gui_interactions.html"><span class="doc">Tutorial 5</span></a>.</p>
<p>[3] The image window needs to be highlighted to detect keystrokes, not the text editor or the console - see <a class="reference internal" href="tutorial_5_gui_interactions.html"><span class="doc">Tutorial 5</span></a>.</p>
</div>
<div class="section" id="Function-execution">
<h4>Function execution<a class="headerlink" href="#Function-execution" title="Permalink to this headline">¶</a></h4>
<p>Handling the function stack specified in the config files</p>
<ol class="arabic simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">pype</span></code> function will execute all functions in sequence and overwrite past iterations, except data from interactive user input (e.g. <code class="docutils literal notranslate"><span class="pre">create_mask</span></code> or <code class="docutils literal notranslate"><span class="pre">landmarks</span></code> - see point 2.).</p></li>
<li><p>To overwrite interactive user input, set the argument <code class="docutils literal notranslate"><span class="pre">overwrite:</span> <span class="pre">true</span></code> at the specific function in the configuration file. <strong>Remember to remove it after the next run. [1]</strong></p></li>
<li><p>If a <code class="docutils literal notranslate"><span class="pre">pype</span></code> is initialized on a directory (either from a Phenopype project or a directory specified with the argument <code class="docutils literal notranslate"><span class="pre">dirpath</span></code>), it will attempt to load input data (e.g. masks) that contain the provided <code class="docutils literal notranslate"><span class="pre">name</span></code> argument [2].</p></li>
<li><p>To edit the loaded input data, set the argument <code class="docutils literal notranslate"><span class="pre">overwrite:</span> <span class="pre">true</span></code> as explained in point 2.</p></li>
</ol>
<p>[1] If you forget to remove an overwrite argument and are prompted to overwrite previous input, simply remove the <code class="docutils literal notranslate"><span class="pre">overwrite:</span> <span class="pre">true</span></code> argument, and save to run the <code class="docutils literal notranslate"><span class="pre">pype</span></code> again, it will fall back onto input from the last iteration.</p>
<p>[2] For example, <code class="docutils literal notranslate"><span class="pre">pp.pype(image,</span> <span class="pre">name=&quot;run1&quot;,</span> <span class="pre">dirpath=&quot;path\to\directory)</span></code> will attempt to load any saved files in <code class="docutils literal notranslate"><span class="pre">directory</span></code> that contains the suffix <code class="docutils literal notranslate"><span class="pre">&quot;run1&quot;</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;masks_run1.csv&quot;</span></code>).</p>
</div>
<div class="section" id="Visualizing-the-results">
<h4>Visualizing the results<a class="headerlink" href="#Visualizing-the-results" title="Permalink to this headline">¶</a></h4>
<p>Handling aspects of visual feedback (can be completely suppressed by setting <code class="docutils literal notranslate"><span class="pre">feedback=False</span></code> in the <code class="docutils literal notranslate"><span class="pre">pype</span></code> arguments).</p>
<ol class="arabic simple">
<li><p>Visual feedback is always generated automatically by an internal function that show results (i.e. output from <code class="docutils literal notranslate"><span class="pre">landmarks</span></code>, <code class="docutils literal notranslate"><span class="pre">find_contours</span></code> or <code class="docutils literal notranslate"><span class="pre">create_mask</span></code>) on top of a “canvas”.</p></li>
<li><p>The canvas can be the image at any step of analytic process (i.e. raw image, binary image, or a colour channel [gray, red, green or blue]) and is selected with <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">select_canvas</span></code> as part of the <code class="docutils literal notranslate"><span class="pre">visualization</span></code> module.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">select_canvas</span></code> is not specified explicitly, it is called automatically and defaults to the raw image as canvas.</p></li>
<li><p>Output from all functions, needs to be specified manually. So, after using <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">landmarks</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">draw_landmarks</span></code> should be called in the <code class="docutils literal notranslate"><span class="pre">visualization</span></code> module. [1]</p></li>
<li><p>Visual parameters of interactive tools (e.g. <code class="docutils literal notranslate"><span class="pre">point_size</span></code> or <code class="docutils literal notranslate"><span class="pre">line_thickness</span></code>) is specified separately in the respective function, <em>and</em> in the <code class="docutils literal notranslate"><span class="pre">visualization</span></code> module.</p></li>
</ol>
<p>[1] Experimental: use the flag <code class="docutils literal notranslate"><span class="pre">autoshow=True</span></code> in the <code class="docutils literal notranslate"><span class="pre">pype</span></code> arguments to automatically show results.</p>
</div>
<div class="section" id="Exporting-the-results">
<h4>Exporting the results<a class="headerlink" href="#Exporting-the-results" title="Permalink to this headline">¶</a></h4>
<p>Saving results and canvas for quality control.</p>
<ol class="arabic simple">
<li><p>All results are saved automatically, even if the respective functions in <code class="docutils literal notranslate"><span class="pre">export</span></code> are not specified, with the <code class="docutils literal notranslate"><span class="pre">name</span></code> argument in <code class="docutils literal notranslate"><span class="pre">pype</span></code> as suffix [1,2].</p></li>
<li><p>If a file already exist in the directory, and the respective function is <em>not</em> listed under <code class="docutils literal notranslate"><span class="pre">export:</span></code>, then it <em>will not</em> be overwritten. If an export function <em>is</em> specified under <code class="docutils literal notranslate"><span class="pre">export:</span></code>, it <em>will overwrite</em> any existing file [3]</p></li>
<li><p>The canvas is an exception: it will always be saved and always be overwritten to show the output from the last iteration. However, users can modify the canvas name with <code class="docutils literal notranslate"><span class="pre">name</span></code> in the arguments to save different output side by side [3].</p></li>
</ol>
<p>[1] Experimental: use the flag <code class="docutils literal notranslate"><span class="pre">autosave=False</span></code> in the <code class="docutils literal notranslate"><span class="pre">pype</span></code> arguments to deactivate this behavior.</p>
<p>[2] For example, <code class="docutils literal notranslate"><span class="pre">pp.pype(image,</span> <span class="pre">name=&quot;run1&quot;)</span></code> will save <code class="docutils literal notranslate"><span class="pre">&quot;masks_run1.csv&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;contours_run1.csv&quot;</span></code>.</p>
<p>[3] For example, listing <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">save_landmarks</span></code> under <code class="docutils literal notranslate"><span class="pre">export:</span></code> will overwrite <code class="docutils literal notranslate"><span class="pre">landmarks_run1.csv</span></code></p>
<p>[4] For example, <code class="docutils literal notranslate"><span class="pre">name:</span> <span class="pre">binary</span></code> under <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">save_canvas:</span></code> save the canvas as <code class="docutils literal notranslate"><span class="pre">canvas_binary.jpg</span></code></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Moritz Lürig.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>