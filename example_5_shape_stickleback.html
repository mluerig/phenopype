<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Example 5: Stickleback morphometrics - body and armor-plate shape &#8212; phenopype 2.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Example 6: Counting and measuring freshwater snails" href="example_6_counting_snails.html" />
    <link rel="prev" title="Example 4: Video analysis - predator prey interactions" href="example_4_video_analysis_stickleback.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          phenopype</a>
        <span class="navbar-text navbar-version pull-left"><b>2.0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/mluerig/phenopype">Phenopype on Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Additional resources</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="tutorial_0.html">How to run tutorials and examples using Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_1_python_intro.html">Tutorial 1: A (very) brief python introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_2_phenopype_images.html">Tutorial 2: Interacting with images in phenopype</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_3_phenopype_workflows.html">Tutorial 3: Image analysis workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_4_managing_projects.html">Tutorial 4: Setting up and managing projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_5_references.html">Tutorial 5: Creating and detecting a reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_6_video_analysis.html">Tutorial 6: Video analysis</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Example 5: Stickleback morphometrics - body and armor-plate shape</a><ul>
<li><a class="reference internal" href="#High-throughput-workflow-1-(Thresholding-based)">High throughput workflow 1 (Thresholding based)</a><ul>
<li><a class="reference internal" href="#Create-project">Create project</a></li>
<li><a class="reference internal" href="#Load-project">Load project</a></li>
<li><a class="reference internal" href="#The-procedure">The procedure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#High-throughput-workflow-2-(Manual-approach)">High throughput workflow 2 (Manual approach)</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="example_4_video_analysis_stickleback.html" title="Previous Chapter: Example 4: Video analysis - predator prey interactions"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Example 4: Vi...</span>
    </a>
  </li>
  <li>
    <a href="example_6_counting_snails.html" title="Next Chapter: Example 6: Counting and measuring freshwater snails"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Example 6: Co... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/example_5_shape_stickleback.ipynb.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Example 5: Stickleback morphometrics - body and armor-plate shape</a><ul>
<li><a class="reference internal" href="#High-throughput-workflow-1-(Thresholding-based)">High throughput workflow 1 (Thresholding based)</a><ul>
<li><a class="reference internal" href="#Create-project">Create project</a></li>
<li><a class="reference internal" href="#Load-project">Load project</a></li>
<li><a class="reference internal" href="#The-procedure">The procedure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#High-throughput-workflow-2-(Manual-approach)">High throughput workflow 2 (Manual approach)</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Example-5:-Stickleback-morphometrics---body-and-armor-plate-shape">
<h1>Example 5: Stickleback morphometrics - body and armor-plate shape<a class="headerlink" href="#Example-5:-Stickleback-morphometrics---body-and-armor-plate-shape" title="Permalink to this headline">¶</a></h1>
<p>Variation in continuous phenotypic traits like shape or area of certain structures are difficult to quantify with landmarks, because they are too complex or have no underlying assumption of homology. In this example, the number and area of armor plating was measured as a continuous trait in a two-step process: first, a mask was set around the posterior region that contains the plates, second, the red channel (highest signal-to-noise-ratio) of the image was thresholded.</p>
<p>In this example we use the <code class="docutils literal notranslate"><span class="pre">watershed</span></code> algorithm, which helps to separate detected objects into “peaks of wanted information” and “valleys of unwanted information”. The principle is explained here: <a class="reference external" href="https://docs.opencv.org/master/d3/db4/tutorial_py_watershed.html">https://docs.opencv.org/master/d3/db4/tutorial_py_watershed.html</a></p>
<div class="row; text-align: left"><div class="col-md-6"><p><img alt="Before" src="_images/ex5_before.jpg" /></p>
<p><strong>Input</strong> - Stained threespine stickleback. The size of plates at a given plate index varies within at between ecotypes (e.g. lake and stream morphs)</p>
</div><div class="col-md-6"><p><img alt="After" src="_images/ex5_after.jpg" /></p>
<p><strong>Results</strong> - After applying adaptive thresholding and watershed algorithms, the plates separate. Where this is not the case they can be separated manually.</p>
</div></div><div class="section" id="High-throughput-workflow-1-(Thresholding-based)">
<h2>High throughput workflow 1 (Thresholding based)<a class="headerlink" href="#High-throughput-workflow-1-(Thresholding-based)" title="Permalink to this headline">¶</a></h2>
<p>First we need to create a project, as described in <a class="reference external" href="tutorial_3_managing_projects_1.ipynb">Tutorial 3</a> and <a class="reference external" href="tutorial_4_managing_projects_2.ipynb">Tutorial 4</a>.</p>
<p><strong>Note:</strong> If you have already created a project you can skip the following steps and load the project with <code class="docutils literal notranslate"><span class="pre">pp.project.load(&quot;path/to/project&quot;)</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">phenopype</span> <span class="k">as</span> <span class="nn">pp</span>

<span class="c1">## relative from phenopype-master/tutorials</span>
<span class="n">project_root</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;_temp/output/ex5_project&quot;</span>
<span class="n">image_dir</span> <span class="o">=</span> <span class="s2">&quot;images&quot;</span>
<span class="n">reference_image</span> <span class="o">=</span> <span class="s2">&quot;images/stickleback_side.jpg&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="Create-project">
<h3>Create project<a class="headerlink" href="#Create-project" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ex5_1</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">root_dir</span><span class="o">=</span><span class="n">project_root</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--------------------------------------------
Phenopype will create a new project at
D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project

Proceed? (y/n)
y
Warning - project root_dir already exists - overwrite? (y/n)y

&#34;D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project&#34; created (overwritten)

project attributes written to D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project\attributes.yaml
--------------------------------------------
</pre></div></div>
</div>
<p>This will create a folder structure and allows for easy creation of the <code class="docutils literal notranslate"><span class="pre">pype</span></code>-configuration files needed for high throughput. First we add the image files in the directory, but only “stickle1”, “stickle2”, and “stickle3”.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ex5_1</span><span class="o">.</span><span class="n">add_files</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="n">image_dir</span><span class="p">,</span>
                <span class="n">include</span><span class="o">=</span><span class="s2">&quot;stickle&quot;</span><span class="p">,</span>
                <span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">,</span><span class="s2">&quot;top&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--------------------------------------------
phenopype will search for image files at

D:\workspace\git\phenopype\tutorials\images

using the following settings:

filetypes: [&#39;jpg&#39;, &#39;JPG&#39;, &#39;jpeg&#39;, &#39;JPEG&#39;, &#39;tif&#39;, &#39;png&#39;, &#39;bmp&#39;], include: stickle, exclude: [&#39;side&#39;, &#39;top&#39;], mode: copy, recursive: False, resize: False, unique: path

Found image stickle1.JPG - phenopype-project folder 0__stickle1 created
Found image stickle2.JPG - phenopype-project folder 0__stickle2 created
Found image stickle3.JPG - phenopype-project folder 0__stickle3 created

Found 3 files
--------------------------------------------
</pre></div></div>
</div>
<p>Now we add the appropriate configuration file. As for the other examples I have created a template (“ex5”) with appropriate settings, which is passed to the pype using <code class="docutils literal notranslate"><span class="pre">template=&quot;ex5_1&quot;</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">pype_config_templates</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;demo.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\demo.yaml&#39;,
 &#39;ex1.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex1.yaml&#39;,
 &#39;ex2.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex2.yaml&#39;,
 &#39;ex3.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex3.yaml&#39;,
 &#39;ex5_1.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex5_1.yaml&#39;,
 &#39;ex5_2.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex5_2.yaml&#39;,
 &#39;ex6.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex6.yaml&#39;,
 &#39;ex7.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex7.yaml&#39;,
 &#39;ex8_1.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex8_1.yaml&#39;,
 &#39;ex8_2.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\ex8_2.yaml&#39;,
 &#39;landmarks1.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\landmarks1.yaml&#39;,
 &#39;landmarks2.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\landmarks2.yaml&#39;,
 &#39;tut3.yaml&#39;: &#39;d:\\workspace\\git\\phenopype\\phenopype\\templates\\tut3.yaml&#39;}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ex5_1</span><span class="o">.</span><span class="n">add_config</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;v1&quot;</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="s2">&quot;ex5_1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New pype configuration created (ex5_1.yaml) from phenopype template:
d:\workspace\git\phenopype\phenopype\templates\ex5_1.yaml
pype_v1.yaml created for 0__stickle1
pype_v1.yaml created for 0__stickle2
pype_v1.yaml created for 0__stickle3
</pre></div></div>
</div>
<p>Now we add reference image to create a scale-template so we can adjust our landmark coordinate space. This is important if for example the distance between the camera and your sample changes.</p>
<center><div style="width:500px; text-align: left"><p><img alt="Adding a scale" src="_images/ex2_scale.gif" /></p>
</div></center><div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ex5_1</span><span class="o">.</span><span class="n">add_reference</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span><span class="p">,</span>
                    <span class="n">reference_image</span> <span class="o">=</span> <span class="n">reference_image</span><span class="p">,</span>
                    <span class="n">template</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Reference image loaded from images/stickleback_side.jpg
- measure pixel-to-mm-ratio
Reference set
- add column length
Template selected
Reference image saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project\reference_v1.tif
Reference image saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project\reference_template_v1.tif
Saved reference info to project attributes.
setting active reference to &#34;v1&#34; for 0__stickle1 (active=True)
setting active reference to &#34;v1&#34; for 0__stickle2 (active=True)
setting active reference to &#34;v1&#34; for 0__stickle3 (active=True)
</pre></div></div>
</div>
<p>Afterwards, we save the project (to the root folder).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pp</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">ex5_1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Project data saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project\project.data.
</pre></div></div>
</div>
</div>
<div class="section" id="Load-project">
<h3>Load project<a class="headerlink" href="#Load-project" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ex5_1</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">project_root</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--------------------------------------------
Project loaded from
D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project

Project has 3 image folders
--------------------------------------------
</pre></div></div>
</div>
</div>
<div class="section" id="The-procedure">
<h3>The procedure<a class="headerlink" href="#The-procedure" title="Permalink to this headline">¶</a></h3>
<p>The basic points of the procedure are:</p>
<ol class="arabic simple">
<li><p>Draw a mask around the area of interest (i.e. the plates)</p></li>
<li><p>Let the algorithm find the scale</p></li>
<li><p>Enter the ID from the reference card into the mask</p></li>
</ol>
<center><div style="width:500px; text-align: left"><p><img alt="Create masks" src="_images/masks2.gif" /></p>
</div></center><p>The rest is automatic: a watershed algorithm helps to separate the plates. Sensitivity of the algorithm can be mostly controlled with the <code class="docutils literal notranslate"><span class="pre">distance_cutoff</span></code> argument, but also playing around with the thresholding arguments (<code class="docutils literal notranslate"><span class="pre">blocksize</span></code> and <code class="docutils literal notranslate"><span class="pre">constant</span></code>) can help to improve results.</p>
<p>Sometimes the overall results are goog except for one or two cases of plates that touch each other. In this case, the <code class="docutils literal notranslate"><span class="pre">draw</span></code> function can be used to separate those plates without changing the whole procedure.</p>
<p>Now we can run the <code class="docutils literal notranslate"><span class="pre">pype</span></code> routine with a simple loop on <code class="docutils literal notranslate"><span class="pre">ex5_1.dirpaths</span></code>, which is a list of all project directories that contain the copied raw images and the config files we generated before.</p>
<p>Move on to the next image with <code class="docutils literal notranslate"><span class="pre">Ctrl+Enter</span></code>, interrupt the loop with <code class="docutils literal notranslate"><span class="pre">Esc</span></code>. To resume to the point where you left, add the <code class="docutils literal notranslate"><span class="pre">skip</span></code> argument so directory with processed files are not run again.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">dirpath</span> <span class="ow">in</span> <span class="n">ex5_1</span><span class="o">.</span><span class="n">dirpaths</span><span class="p">:</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">pype</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span><span class="p">,</span> <span class="n">skip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Succesfully loaded existing pype config (pype_config_v1.yaml) from:
D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project\data\0__stickle1\pype_config_v1.yaml


------------+++ new pype iteration 2021:05:10 16:03:27 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for v1
- reference template image loaded from root directory
PREPROCESSING
create_mask
- creating mask
detect_reference
---------------------------------------------------
Reference card found with 259 keypoint matches:
template image has 36.330978516962624 pixel per mm.
current image has 35.2 pixel per mm.
= 96.806 % of template image.
---------------------------------------------------
enter_data
- add column ID
SEGMENTATION
blur
threshold
- excluding pixels from 1 drawn masks
- including pixels from 1 drawn masks
morphology
watershed
- found 27 contours that match criteria
draw
- drawing
zero coordinates - redo drawing!
segmentation.draw: ValueError - No objects to concatenate
find_contours
- found 13 contours that match criteria
VISUALIZATION
select_canvas
- red channel
draw_contours
draw_masks
drawing mask: mask1
drawing mask: reference
EXPORT
save_contours
- contours saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project\data\0__stickle1\contours_v1.csv.
=== AUTOSAVE ===
save_canvas
- canvas saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project\data\0__stickle1\canvas_v1.jpg.
save_data_entry
- add column ID
save_masks
- masks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project\data\0__stickle1\masks_v1.csv.
save_reference
v1
- save reference to attributes


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




TERMINATE
Succesfully loaded existing pype config (pype_config_v1.yaml) from:
D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project\data\0__stickle2\pype_config_v1.yaml


------------+++ new pype iteration 2021:05:10 16:03:45 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for v1
- reference template image loaded from root directory
PREPROCESSING
create_mask
- creating mask
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
An exception has occurred, use %tb to see the full traceback.

<span class="ansi-red-intense-fg ansi-bold">SystemExit</span><span class="ansi-red-intense-fg ansi-bold">:</span>

TERMINATE (by user)

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING: To exit: use &#39;exit&#39;, &#39;quit&#39;, or Ctrl-D.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">## inspect results</span>
<span class="c1">## DataFrame</span>
<span class="n">out</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">df_contours</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;order&quot;</span><span class="p">,</span> <span class="s2">&quot;idx_child&quot;</span><span class="p">,</span> <span class="s2">&quot;idx_parent&quot;</span><span class="p">,</span> <span class="s2">&quot;coords&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename_original</th>
      <th>filename_phenopype</th>
      <th>width</th>
      <th>height</th>
      <th>current_px_mm_ratio</th>
      <th>ID</th>
      <th>contour</th>
      <th>center</th>
      <th>diameter</th>
      <th>area</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>1</td>
      <td>(1635, 444)</td>
      <td>22</td>
      <td>174</td>
    </tr>
    <tr>
      <th>1</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>2</td>
      <td>(1589, 440)</td>
      <td>32</td>
      <td>248</td>
    </tr>
    <tr>
      <th>2</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>3</td>
      <td>(1364, 410)</td>
      <td>34</td>
      <td>194</td>
    </tr>
    <tr>
      <th>3</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>4</td>
      <td>(1662, 385)</td>
      <td>36</td>
      <td>320</td>
    </tr>
    <tr>
      <th>4</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>5</td>
      <td>(1636, 380)</td>
      <td>41</td>
      <td>365</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>8</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>9</td>
      <td>(1521, 365)</td>
      <td>101</td>
      <td>1235</td>
    </tr>
    <tr>
      <th>9</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>10</td>
      <td>(1485, 360)</td>
      <td>114</td>
      <td>1559</td>
    </tr>
    <tr>
      <th>10</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>11</td>
      <td>(1453, 355)</td>
      <td>119</td>
      <td>1638</td>
    </tr>
    <tr>
      <th>11</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>12</td>
      <td>(1423, 355)</td>
      <td>128</td>
      <td>1755</td>
    </tr>
    <tr>
      <th>12</th>
      <td>stickle1.JPG</td>
      <td>copy_stickle1.JPG</td>
      <td>2400</td>
      <td>1600</td>
      <td>35.2</td>
      <td>142501</td>
      <td>13</td>
      <td>(1391, 344)</td>
      <td>115</td>
      <td>1542</td>
    </tr>
  </tbody>
</table>
<p>13 rows × 10 columns</p>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">## image</span>
<span class="n">pp</span><span class="o">.</span><span class="n">show_image</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="High-throughput-workflow-2-(Manual-approach)">
<h2>High throughput workflow 2 (Manual approach)<a class="headerlink" href="#High-throughput-workflow-2-(Manual-approach)" title="Permalink to this headline">¶</a></h2>
<p>Sometimes thresholding algorithms don’t separate plates that are too close to each other or overap. For this case, the <code class="docutils literal notranslate"><span class="pre">create_mask</span></code> function introduced above can be used to separate out specific plates.</p>
<center><div style="width:500px; text-align: left"><p><img alt="Find contours manually" src="_images/ex5_poly_masks.gif" /></p>
<p>Manual polygon drawing using the mask tool. Although this is more manual work, it may sometimes be the only way to separate overlapping or connected body-structures.</p>
</div></center><p>Just as before we need to create a phenpype project, add the image files, and the appropriate template (<code class="docutils literal notranslate"><span class="pre">&quot;ex5_2&quot;</span></code>). As above, we also have set the reference image for scale detection.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">phenopype</span> <span class="k">as</span> <span class="nn">pp</span>

<span class="c1">## relative from phenopype-master/tutorials</span>
<span class="n">project_root</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;_temp/output/ex5_project2&quot;</span>
<span class="n">image_dir</span> <span class="o">=</span> <span class="s2">&quot;images&quot;</span>
<span class="n">reference_image</span> <span class="o">=</span> <span class="s2">&quot;images/stickleback_side.jpg&quot;</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ex5_2</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">root_dir</span><span class="o">=</span><span class="n">project_root</span><span class="p">)</span>
<span class="n">ex5_2</span><span class="o">.</span><span class="n">add_files</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="n">image_dir</span><span class="p">,</span>
                <span class="n">include</span><span class="o">=</span><span class="s2">&quot;stickle&quot;</span><span class="p">,</span>
                <span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;side&quot;</span><span class="p">,</span><span class="s2">&quot;top&quot;</span><span class="p">])</span>
<span class="n">ex5_2</span><span class="o">.</span><span class="n">add_config</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;v1&quot;</span><span class="p">,</span>
                 <span class="n">template</span><span class="o">=</span><span class="s2">&quot;ex5_2&quot;</span><span class="p">)</span>
<span class="n">ex5_2</span><span class="o">.</span><span class="n">add_reference</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span><span class="p">,</span>
                    <span class="n">reference_image</span> <span class="o">=</span> <span class="n">reference_image</span><span class="p">,</span>
                    <span class="n">template</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pp</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">ex5_2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--------------------------------------------
Phenopype will create a new project at
D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2

Proceed? (y/n)
y
Warning - project root_dir already exists - overwrite? (y/n)y

&#34;D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2&#34; created (overwritten)

project attributes written to D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\attributes.yaml
--------------------------------------------
--------------------------------------------
phenopype will search for image files at

D:\workspace\git\phenopype\tutorials\images

using the following settings:

filetypes: [&#39;jpg&#39;, &#39;JPG&#39;, &#39;jpeg&#39;, &#39;JPEG&#39;, &#39;tif&#39;, &#39;png&#39;, &#39;bmp&#39;], include: stickle, exclude: [&#39;side&#39;, &#39;top&#39;], mode: copy, recursive: False, resize: False, unique: path

Found image stickle1.JPG - phenopype-project folder 0__stickle1 created
Found image stickle2.JPG - phenopype-project folder 0__stickle2 created
Found image stickle3.JPG - phenopype-project folder 0__stickle3 created

Found 3 files
--------------------------------------------
New pype configuration created (ex5_2.yaml) from phenopype template:
d:\workspace\git\phenopype\phenopype\templates\ex5_2.yaml
pype_v1.yaml created for 0__stickle1
pype_v1.yaml created for 0__stickle2
pype_v1.yaml created for 0__stickle3
Reference image loaded from images/stickleback_side.jpg
- measure pixel-to-mm-ratio
Reference set
- add column length
Template selected
Reference image saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\reference_v1.tif
Reference image saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\reference_template_v1.tif
Saved reference info to project attributes.
setting active reference to &#34;v1&#34; for 0__stickle1 (active=True)
setting active reference to &#34;v1&#34; for 0__stickle2 (active=True)
setting active reference to &#34;v1&#34; for 0__stickle3 (active=True)
Project data saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\project.data.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">dirpath</span> <span class="ow">in</span> <span class="n">ex5_2</span><span class="o">.</span><span class="n">dirpaths</span><span class="p">:</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">pype</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span><span class="p">,</span> <span class="n">skip</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Succesfully loaded existing pype config (pype_config_v1.yaml) from:
D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\data\0__stickle1\pype_config_v1.yaml


------------+++ new pype iteration 2021:05:10 16:06:15 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for v1
- reference template image loaded from root directory
PREPROCESSING
create_mask
- creating mask
detect_reference
---------------------------------------------------
Reference card found with 248 keypoint matches:
template image has 38.41874542459709 pixel per mm.
current image has 37.2 pixel per mm.
= 96.763 % of template image.
---------------------------------------------------
enter_data
- add column ID
SEGMENTATION
blur
threshold
- excluding pixels from 1 drawn masks
- including pixels from 1 drawn masks
draw
- drawing
zero coordinates - redo drawing!
segmentation.draw: ValueError - No objects to concatenate
find_contours
- found 1 contours that match criteria
VISUALIZATION
select_canvas
- red channel
draw_contours
draw_masks
drawing mask: mask1
drawing mask: reference
EXPORT
save_contours
- contours saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\data\0__stickle1\contours_v1.csv.
=== AUTOSAVE ===
save_canvas
- canvas saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\data\0__stickle1\canvas_v1.jpg.
save_data_entry
- add column ID
save_masks
- masks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\data\0__stickle1\masks_v1.csv.
save_reference
v1
- save reference to attributes


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




------------+++ new pype iteration 2021:05:10 16:06:29 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for v1
- reference template image loaded from root directory
PREPROCESSING
create_mask
- mask with label mask1 already created (edit/overwrite=False)
detect_reference
- reference already detected (overwrite=False)
enter_data
- column ID already created (overwrite=False)
SEGMENTATION
blur
threshold
- excluding pixels from 1 drawn masks
- including pixels from 1 drawn masks
draw
- drawing
zero coordinates - redo drawing!
segmentation.draw: ValueError - No objects to concatenate
find_contours
- found 1 contours that match criteria
VISUALIZATION
select_canvas
- red channel
draw_contours
draw_masks
drawing mask: mask1
drawing mask: reference
EXPORT
save_contours
- contours saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\data\0__stickle1\contours_v1.csv (overwritten).
=== AUTOSAVE ===
save_canvas
- canvas saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\data\0__stickle1\canvas_v1.jpg (overwritten).
save_data_entry
- add column ID (overwriting)
save_masks
- masks saved under D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\data\0__stickle1\masks_v1.csv (overwritten).
save_reference
v1
- save reference to attributes (overwriting)


------------+++ finished pype iteration +++--------------
-------(End with Ctrl+Enter or re-run with Enter)--------




TERMINATE
Succesfully loaded existing pype config (pype_config_v1.yaml) from:
D:\workspace\git\phenopype\tutorials\_temp\output\ex5_project2\data\0__stickle2\pype_config_v1.yaml


------------+++ new pype iteration 2021:05:10 16:06:32 +++--------------


=== AUTOLOAD ===
- project level reference information loaded for v1
- reference template image loaded from root directory
PREPROCESSING
create_mask
- creating mask
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
An exception has occurred, use %tb to see the full traceback.

<span class="ansi-red-intense-fg ansi-bold">SystemExit</span><span class="ansi-red-intense-fg ansi-bold">:</span>

TERMINATE (by user)

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING: To exit: use &#39;exit&#39;, &#39;quit&#39;, or Ctrl-D.
</pre></div></div>
</div>
<p>The data containing the size of each contour are now in “contours_v1.csv”, just as above. Using the “current_px_mm_ratio” colum you can calculate size and area in mm, with the first (x-coordinate) value in the “center” colum you can order the plates from left to right.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2021, Moritz Lürig.<br/>
      Last updated on May 10, 2021, 5:17:54 PM.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>